# **Классы**

## Синтаксис класса

- [атрибуты] [модификаторы] class имя_класса [:список_родителей]{тело класса} модификатор: new, abstarct, sealed
- public: публичный, общедоступный класс или член класса. Такой член класса доступен из любого места в коде, а также из других программ и сборок.
- private: закрытый класс или член класса. Представляет полную противоположность модификатору public. Такой закрытый класс или член класса доступен только из кода в том же классе или контексте.
- protected: такой член класса доступен из любого места в текущем классе или в производных классах.
- internal: класс или член класса с подобным модификатором доступны из любого места кода в той же сборке, однако он недоступен для других программ и сборок(как в случае с модификатором public)
- protected internal: совмещает функционал двух модификаторов. Классы и члены класса с таким модификатором доступны из текущей сборки и из производных классов.

## Члены класса

В теле класса могут быть объявлены:

- _**константы**_
- поля
- конструкторы и деструкторы
- методы
- события
- делегаты
- классы(структуры, интерфейсы, перечисления)

## Поля классов

- Поля классов используются для хранения данных
- Поля могут иметь модификаторы доступа.
- Read Only модификатор показывает, что полю можно присвоить значение только в конструкторе

public class MyClass { public string MyInstanceField; public string Concatenate(string valueToAppend) { return MyInstanceField; }

} … MyClass instance = new MyClass(); instance.MyInstanceField = “Some New Value”

## Определение поведения типа

- Класс, который объявляется должен планироваться как то, что он должен выполнять, а не то, какие данные он должен содержать
- В C# для определения поведения используются методы
- Метод может вызываться в других частях программы, для выполнения какого-то поведения

namespace CallingAMethod { class Program { static void Main(string[] args) { System.Console.WriteLine(”I’m calling a method!”); } } }

## Определение поведения типа

- Важные шаги при добавлении метода, в свой собственный тип

1. Выбрать правильное имя
2. Решить, какие данные должны попасть в метод
3. Решить, какие данные должны быть возвращены из методы
4. Решить, какая <<область видимости>> будет у метода

class Calculator { public int Add(int x, int y) { return x + y; } }

- Классы калькулятор, который имеет метод для вычисления суммы двух чисел.

1. Add - показывает, что этот метод делает
2. Add описаны два аргумента x и y, наименование которых тоже важно

## Дополнительное законодательство Demeter

- С методами самого объекта
- С методами объектов, от которых объект зависит напрямую
- С созданными объектами
- С объектами, которые приходят в метод в качестве параметра
- С глобальными переменными

## Создание экземпляра класса

**объект -** участок памяти, в котором хранится все общее для всех <<объектов>> одного типа, а именно: описание их поведения( то есть методы ) и некие статические члены.

**экземпляр -** участок памяти, в котором хранятся данные описывающие определенный <<объект>> данного типа, также в экземпляре храниться ссылка на объект ( на свое поведение)

## Создание экземпляра по слабой ссылке и по сильной ссылке

- когда экземпляр создается, и ссылка на него не записывается в переменную, тогда это создание экземпляра по слабой ссылке. Такое создание экземпляра можно использовать, если экземпляр нужен лишь для вызова определенного метода на нем и в дальнейшем не используется! new MyClass().Method();
- когда экземпляр создается, и ссылка на него записывается в переменную, тогда это создание экземпляра по сильной ссылке MyClass instance = new MyClass();
- Инстанцирование(instantiation) - создание экземпляра класса. В отличие от слова <<создание>>, применяется не к объекту, а к классу. То есть, говорят: <<создать экземпляр класса или инстанцировать класс>>.

## Создание экземпляра класса

- Класс создается с помощью оператора new и вызова конструктора
- Конструктор может быть переопределен несколько раз с разными параметрами

Конструктор - специальный метод, который может принимать параметры и не возвращает значение. Обязательное имеет: Имя класса. Используется для создания объекта и инициализации полей начальными значениями. Обязательно должен быть в классе.

class ConstuctorChaining { private int_p; public ConstructorChaining() : this(3) { } public ContructorChaining(int p) { this.p = p; } }

static void Main(string{} args) { ContructorChaining vv = new ConstructorChaining(); ConstructorChaining vv1 = new ConstructorChaining(4); }

В стандартном конструкторе, если не указана конкретное значение полей, поля заполняются значением по умолчанию для данного типа.

Перегруженный конструктор может принимать поля:

- Обычные значения параметров
- Именованные
- Необязательные

Свойства полей являются _**public**_

Инкапсуляция - сокрытия данных.

Ключевое thise - предоставляется ссылку на текущий экземпляр класса

## Создание экземпляра класса

static void Main(string[] args) { ConstructorCaining vv = new ConstructorChaining(); ContructorChaining vv1 == new Contstructor(4); }

## Свойтва статического конструктора

- не имеет модификаторов доступа
- не принимает параметры
- класс может иметь только 1 статический конструктор
- не перегружаются
- нельзя вызвать напрямую, он вызывается автоматически
- запускается первым, перед созданием первого экземпляра

## Статические элементы класса

- Объявление static для элемента класса дает возможность видеть этот элемент без инициализации класса
- Недостаток - побочный эффект, когда сложно отследить зависимость, в какой из моделей меняется статический элемент

class MyClass { public static int MyStaticField = 42; }

## Основные принципы ООП

- Инкапсуляция - как язык скрывает детали внутренней реализации объектов и предохраняет целостность данных
- Наследование - как язык стимулирует многократное использование кода
- Полиморфизм - как язык позволяет трактовать связанные объекты сходным образом